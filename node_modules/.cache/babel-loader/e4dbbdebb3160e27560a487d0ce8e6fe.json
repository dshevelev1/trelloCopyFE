{"ast":null,"code":"var _jsxFileName = \"/home/ITRANSITION.CORP/d.shevelev/Desktop/testTaskITr/trelloCopyFE/src/Routes/Main.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Board from '../Elements/Board';\nimport $ from 'jquery';\nimport Cookies from 'js-cookie';\nimport { TOKEN_COOKIE_NAME } from '../index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Main() {\n  _s();\n\n  const [boards, setBoards] = useState([]);\n  const [firstTime, setFirstTime] = useState(true);\n\n  const updateBoards = () => {\n    /* eslint-disable-next-line @typescript-eslint/no-floating-promises */\n    $.ajax({\n      url: 'http://localhost:8000/api/boards',\n      type: 'GET',\n      crossDomain: true,\n      beforeSend: function (xhr) {\n        /* eslint-disable-next-line @typescript-eslint/restrict-plus-operands */\n        xhr.setRequestHeader('Authorization', 'Bearer ' + Cookies.get(TOKEN_COOKIE_NAME));\n      }\n    }).done(function (response) {\n      if (response.result === 'success' && typeof response.boards !== 'undefined') {\n        setBoards(response.boards);\n        setFirstTime(false);\n      }\n    }).fail(function (response) {\n      if (response.status === 401) {\n        Cookies.remove(TOKEN_COOKIE_NAME);\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (firstTime) {\n      updateBoards();\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'boards-container',\n    children: boards.map(function (element, i) {\n      return /*#__PURE__*/_jsxDEV(Board, {\n        data: element,\n        updateBoards: updateBoards\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 14\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 10\n  }, this);\n}\n\n_s(Main, \"AQWLkZVLMvenWmTg79k9COZSlIs=\");\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"names":["React","useEffect","useState","Board","$","Cookies","TOKEN_COOKIE_NAME","Main","boards","setBoards","firstTime","setFirstTime","updateBoards","ajax","url","type","crossDomain","beforeSend","xhr","setRequestHeader","get","done","response","result","fail","status","remove","map","element","i"],"sources":["/home/ITRANSITION.CORP/d.shevelev/Desktop/testTaskITr/trelloCopyFE/src/Routes/Main.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Board from '../Elements/Board'\nimport $ from 'jquery'\nimport Cookies from 'js-cookie'\nimport { TOKEN_COOKIE_NAME } from '../index'\n\nexport interface IBoard {\n  id: number\n  name: string\n  description: string\n}\n\nfunction Main (): JSX.Element {\n  const [boards, setBoards] = useState<IBoard[] | []>([])\n  const [firstTime, setFirstTime] = useState(true)\n\n  const updateBoards = (): void => {\n    /* eslint-disable-next-line @typescript-eslint/no-floating-promises */\n    $.ajax({\n      url: 'http://localhost:8000/api/boards',\n      type: 'GET',\n      crossDomain: true,\n      beforeSend: function (xhr) {\n        /* eslint-disable-next-line @typescript-eslint/restrict-plus-operands */\n        xhr.setRequestHeader('Authorization', 'Bearer ' + Cookies.get(TOKEN_COOKIE_NAME))\n      }\n    }).done(function (response: any) {\n      if (response.result === 'success' && typeof response.boards !== 'undefined') {\n        setBoards(response.boards)\n        setFirstTime(false)\n      }\n    }).fail(function (response) {\n      if (response.status === 401) {\n        Cookies.remove(TOKEN_COOKIE_NAME)\n      }\n    })\n  }\n\n  useEffect(() => {\n    if (firstTime) {\n      updateBoards()\n    }\n  })\n\n  return <div className={'boards-container'}>\n    { boards.map(function (element: IBoard, i: number) {\n      return <Board key={i} data={element} updateBoards={updateBoards} />\n    }) }\n  </div>\n}\n\nexport default Main\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,iBAAT,QAAkC,UAAlC;;;AAQA,SAASC,IAAT,GAA8B;EAAA;;EAC5B,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBP,QAAQ,CAAgB,EAAhB,CAApC;EACA,MAAM,CAACQ,SAAD,EAAYC,YAAZ,IAA4BT,QAAQ,CAAC,IAAD,CAA1C;;EAEA,MAAMU,YAAY,GAAG,MAAY;IAC/B;IACAR,CAAC,CAACS,IAAF,CAAO;MACLC,GAAG,EAAE,kCADA;MAELC,IAAI,EAAE,KAFD;MAGLC,WAAW,EAAE,IAHR;MAILC,UAAU,EAAE,UAAUC,GAAV,EAAe;QACzB;QACAA,GAAG,CAACC,gBAAJ,CAAqB,eAArB,EAAsC,YAAYd,OAAO,CAACe,GAAR,CAAYd,iBAAZ,CAAlD;MACD;IAPI,CAAP,EAQGe,IARH,CAQQ,UAAUC,QAAV,EAAyB;MAC/B,IAAIA,QAAQ,CAACC,MAAT,KAAoB,SAApB,IAAiC,OAAOD,QAAQ,CAACd,MAAhB,KAA2B,WAAhE,EAA6E;QAC3EC,SAAS,CAACa,QAAQ,CAACd,MAAV,CAAT;QACAG,YAAY,CAAC,KAAD,CAAZ;MACD;IACF,CAbD,EAaGa,IAbH,CAaQ,UAAUF,QAAV,EAAoB;MAC1B,IAAIA,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;QAC3BpB,OAAO,CAACqB,MAAR,CAAepB,iBAAf;MACD;IACF,CAjBD;EAkBD,CApBD;;EAsBAL,SAAS,CAAC,MAAM;IACd,IAAIS,SAAJ,EAAe;MACbE,YAAY;IACb;EACF,CAJQ,CAAT;EAMA,oBAAO;IAAK,SAAS,EAAE,kBAAhB;IAAA,UACHJ,MAAM,CAACmB,GAAP,CAAW,UAAUC,OAAV,EAA2BC,CAA3B,EAAsC;MACjD,oBAAO,QAAC,KAAD;QAAe,IAAI,EAAED,OAArB;QAA8B,YAAY,EAAEhB;MAA5C,GAAYiB,CAAZ;QAAA;QAAA;QAAA;MAAA,QAAP;IACD,CAFC;EADG;IAAA;IAAA;IAAA;EAAA,QAAP;AAKD;;GArCQtB,I;;KAAAA,I;AAuCT,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}